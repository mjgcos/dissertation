install.packages("AER")
library("AER", lib.loc="C:/Users/Matt/Documents/R/win-library/3.0")
5 + 2
?cos()
?log
log2(8)
log(8,2)
test1.c(2, 5, 9, 10)
test1.v = c(2, 5, 9, 10)
c
test1.v
test1.v[3]
position(1:20)
position = c(1:20)
pos = seq(1:20)
break = seq(1, 50, 10)
b = seq(1, 50, 10)
years = seq(2005, 2010)
?sd()
sd(pos)
sd(test1.v)
var(pos)
NO = 1000
M = 0.2
num.at.age = NO * exp(-M * ages)
num.at.age(ages) = NO * exp(-M * ages)
num.at.age = NO * exp(-M * a)
num.at.age(a) = NO * exp(-M * a)
a = seq(0, 25)
num.at.age = NO * exp(-M * a)
plot(num.at.age)
rnorm(1, 0, 1)
rnorm(1, 0, 1)
rnorm(1, 0, 1)
rnorm(15, 0, 1)
runif
runif(1000)
mean(runif(1000))
mean(runif(1000000))
lat = runif(1000, 40.4, 41.2)
temp = rnorm(1000, 65, 8)
plot(temp)
hist(temp)
rbind(test1.v, b)
test2.v = c(test1.v, 17)
cbind(test2.v, b)
test1.m = rbind(test2.v, b)
test1.m
dim(test1.m)
test.m = matrix(seq(1:6), 2, 3)
test.m
demo()
library("AER", lib.loc="C:/Users/Matt/Documents/R/win-library/3.0")
data("BankWages")
xtabs
## exploratory analysis of job ~ education
## (tables and spine plots, some education levels merged)
xtabs(~ education + job, data = BankWages)
edcat <- factor(BankWages$education)
levels(edcat)[3:10] <- rep(c("14-15", "16-18", "19-21"), c(2, 3, 3))
tab <- xtabs(~ edcat + job, data = BankWages)
prop.table(tab, 1)
spineplot(tab, off = 0)
plot(job ~ edcat, data = BankWages, off = 0)
> library(plyr)
> library(reshape)
> df <- read.csv("PL 12-13.csv")
> df <- df[, c(2, 3, 4, 7)]
> df <- rename(df, c(Date = "date", HomeTeam = "H", AwayTeam = "A"))
> df$date <- as.Date(df$date, format = "%d/%m/%y")
> dfm <- melt(df, measure.vars = c("H", "A"), variable_name = "loc")
> dfm <- rename(dfm, c(value = "team"))
> dfm <- dfm[order(dfm$date, dfm$team), c("date", "team", "loc", "FTR")]
> dfm$pts <- as.integer(with(dfm, ifelse((loc == "H" & FTR == "H"), 3, ifelse((loc == "A" & FTR == "A"), 3, ifelse(FTR == "D", 1, 0)))))
> dfm1 <- ddply(dfm, .(team), transform, cumpts = cumsum(pts))
library(plyr)
library(reshape)
df <- read.csv("PL 12-13.csv")
df <- df[, c(2, 3, 4, 7)]
df <- rename(df, c(Date = "date", HomeTeam = "H", AwayTeam = "A"))
df$date <- as.Date(df$date, format = "%d/%m/%y")
dfm <- melt(df, measure.vars = c("H", "A"), variable_name = "loc")
dfm <- rename(dfm, c(value = "team"))
dfm <- dfm[order(dfm$date, dfm$team), c("date", "team", "loc", "FTR")]
dfm$pts <- as.integer(with(dfm, ifelse((loc == "H" & FTR == "H"), 3, ifelse((loc == "A" & FTR == "A"), 3, ifelse(FTR == "D", 1, 0)))))
dfm1 <- ddply(dfm, .(team), transform, cumpts = cumsum(pts))
library(plyr)
library(reshape)
df <- read.csv("PL 12-13.csv")
PL.12.13 <- read.csv("~/Academic/Semester 2/Project/Football Betting/PL 12-13.csv")
View(PL.12.13)
library(plyr)
library(reshape)
df <- read.csv("PL 12-13.csv")
View(PL.12.13)
df <- PL.12.13[, c(2, 3, 4, 7)]
df <- rename(df, c(Date = "date", HomeTeam = "H", AwayTeam = "A"))
df$date <- as.Date(df$date, format = "%d/%m/%y")
dfm <- melt(df, measure.vars = c("H", "A"), variable_name = "loc")
dfm <- rename(dfm, c(value = "team"))
dfm <- dfm[order(dfm$date, dfm$team), c("date", "team", "loc", "FTR")]
dfm$pts <- as.integer(with(dfm, ifelse((loc == "H" & FTR == "H"), 3, ifelse((loc == "A" & FTR == "A"), 3, ifelse(FTR == "D", 1, 0)))))
dfm1 <- ddply(dfm, .(team), transform, cumpts = cumsum(pts))
head dfm1
head(dfm1)
cdate <- unique(dfm1$date)
cteam <- unique(dfm1$team)
combs <- merge(cdate, cteam, all = TRUE)
combs <- rename(combs, c(x = "date", y = "team"))
dfm2 <- merge(combs, dfm1, by = c("date", "team"), all.x = TRUE)
dfm2 <- dfm2[order(dfm2$team, dfm2$date), ]
require(zoo)
dfm3 <- ddply(dfm2, .(team), transform, cumpts1 = na.locf(cumpts, na.rm = FALSE))
dfm3 <- ddply(dfm3, .(date), transform, position = rank(-cumpts1, ties.method = "min"))
leaguetable <- function(df, fdate) {
dfm4a <- cast(dfm3, team ~ ., c(sum, length),
subset = (!is.na(FTR) & date <= fdate),
value = "pts")
dfm4a <- rename(dfm4a, c(sum = "P", length = "G"))
dfm4b <- cast(dfm3, team ~ pts, length,
subset = (!is.na(FTR) & date <= fdate),
value = "position")
dfm4b <- rename(dfm4b, c(`0` = "L", `1` = "D",
`3` = "W"))
dfm4b <- dfm4b[, c(1, 4, 3, 2)]
dfm4 <- merge(dfm4a, dfm4b)
dfm4$rank <- rank(-dfm4$P, ties.method = "min")
dfm4[order(dfm4$rank), c(7, 1:6)]
}
leaguetable
leaguetable1 <- function(df, fdate) {
dfm4a <- cast(dfm3, team ~ ., c(sum, length), subset = (!is.na(FTR) & date <= fdate), value = "pts")
dfm4a <- rename(dfm4a, c(sum = "P", length = "G"))
dfm4b <- cast(dfm3, team ~ pts, length, subset = (!is.na(FTR) & date <= fdate), value = "position")
dfm4b <- rename(dfm4b, c(`0` = "L", `1` = "D", `3` = "W"))
dfm4b <- dfm4b[, c(1, 4, 3, 2)]
dfm4 <- merge(dfm4a, dfm4b)
dfm4$rank <- rank(-dfm4$P, ties.method = "min")
dfm4[order(dfm4$rank), c(7, 1:6)]
}
recoded <- read.csv("~/Academic/Semester 1/Analysis/Doing Business Indicators data assignment/recoded.csv")
View(recoded)
500^0.5
1/(500^0.5)
1.96 + 1/(500^0.5)
1.96*(1/(500^0.5))
require(ggplot2)
require(zoo)
require(reshape2)
require(RColorBrewer)
require(tidyr)
require(dplyr)
require(plyr)
require(scales) #for percentage point scales
require(chron)
require(manipulate) # for checkbox/picker.
setwd("~/Academic/SGPE/Dissertation/Data/csv/")
data <- read.csv("long_term_interest_rates_ECB.csv")
data$date <- as.yearmon(data$date, "%Y%b")
data$date <- as.Date(data$date, "%b %Y")
x <- colnames(data)
df <- data %>%
gather(country, yield, Austria..Euro:Slovakia..Euro)
levels(df$country) <- c("AT", "BE", "CY", "DE", "ES", "FI", "FR", "UK", "GR", "IE", "IT", "LT", "LU", "LV", "MT", "NL", "PT", "SI", "SK")
df$date <- as.chron(df$date)
df$date <- as.Date(df$date, format="%m/%d/%y")
#Graphs
b1 <- ggplot(data=df,
aes(date, yield/100, colour=country, linetype=country, size=country)) +
geom_line() +
scale_y_continuous(labels = percent_format()) +
scale_size_manual(values=c(rep.int(1, 19))) +
scale_linetype_manual(values=c(rep.int(1, 19))) +
ylab("European Long Term Bond Yields (ECB)") +
theme_bw()
#NOTES: Great convergence in 1990s, great divergence in 2010s.
#Find pre-ECB data to see extent of convergence.
#For greater simplicity of selection, impose filter for countries
b2 <- function(cy){
subdf <- subset(df, country == cy)
ggplot(subdf,
aes(x=date, y=(yield/100), colour=country, linetype=country, size=country)) +
geom_line() +
scale_y_continuous(labels = percent_format()) +
#scale_size_manual(values=c(rep.int(1, 19))) +
#scale_linetype_manual(values=c(rep.int(1, 19))) +
ylab("European Long Term Bond Yields (ECB)") +
theme_bw()
}
x <- as.list(as.character(unique(df$country)))
graph <- manipulate (b2(cy), cy = picker(x, label = "Country"))
#Lehman Bros collapse: 15 Sep 2008. (wiki)
#Greece: 20 Oct 2009 - defecit revelation. Dec 2009 ratings agencies downgrade (A1 to A2)
#9 Feb 2010 first austerity package. 3 March second package. April - more downgrades
#2 May 2010 bailout. 5 May general strike.
write.csv(df, "ecb_lti_clean.csv")
df <- read.csv("ecb_lti_clean.csv", header = TRUE)
View(df)
df <- df[,c(1,2,3)]
View(df)
df <- read.csv("ecb_lti_clean.csv", header = TRUE)
df <- df[,c(2,3,4)]
View(df)
typeof(df$country)
sapply(df, class)
factor(df$country)
?write.csv
write.csv(df, "ecb_lti_clean.csv", row.names = NA)
write.csv(df, "ecb_lti_clean.csv", row.names = TRUE)
df <- read.csv("ecb_lti_clean.csv", header = TRUE)
write.csv(df, "ecb_lti_clean.csv", row.names = FALSE)
setwd("~/Academic/SGPE/Dissertation/Data/csv/")
data <- read.csv("long_term_interest_rates_ECB.csv")
data$date <- as.yearmon(data$date, "%Y%b")
data$date <- as.Date(data$date, "%b %Y")
x <- colnames(data)
df <- data %>%
gather(country, yield, Austria..Euro:Slovakia..Euro)
levels(df$country) <- c("AT", "BE", "CY", "DE", "ES", "FI", "FR", "UK", "GR", "IE", "IT", "LT", "LU", "LV", "MT", "NL", "PT", "SI", "SK")
df$date <- as.chron(df$date)
df$date <- as.Date(df$date, format="%m/%d/%y")
#save manipulations
write.csv(df, "ecb_lti_clean.csv", row.names = FALSE)
df <- read.csv("ecb_lti_clean.csv", header = TRUE)
View(df)
#Better graphs for demonstration.
require(scales)
setwd("~/Academic/SGPE/Dissertation/Data/csv/")
df <- read.csv("ecb_lti_clean.csv", header = TRUE)
#Better graphs for demonstration.
require(scales)
setwd("~/Academic/SGPE/Dissertation/Data/csv/")
df <- read.csv("ecb_lti_clean.csv", header = TRUE)
require(ggplot2)
require(zoo)
require(reshape2)
require(RColorBrewer)
require(tidyr)
require(dplyr)
require(plyr)
require(scales) #for percentage point scales
require(chron)
require(manipulate) # for checkbox/picker.
setwd("~/Academic/SGPE/Dissertation/Data/csv/")
data <- read.csv("long_term_interest_rates_ECB.csv")
data$date <- as.yearmon(data$date, "%Y%b")
data$date <- as.Date(data$date, "%b %Y")
x <- colnames(data)
df <- data %>%
gather(country, yield, Austria..Euro:Slovakia..Euro)
levels(df$country) <- c("AT", "BE", "CY", "DE", "ES", "FI", "FR", "UK", "GR", "IE", "IT", "LT", "LU", "LV", "MT", "NL", "PT", "SI", "SK")
df$date <- as.chron(df$date)
df$date <- as.Date(df$date, format="%m/%d/%y")
#save manipulations
write.csv(df, "ecb_lti_clean.csv", row.names = FALSE)
#Graphs
b1 <- ggplot(data=df,
aes(date, yield/100, colour=country, linetype=country, size=country)) +
geom_line() +
scale_y_continuous(labels = percent_format()) +
scale_size_manual(values=c(rep.int(1, 19))) +
scale_linetype_manual(values=c(rep.int(1, 19))) +
ylab("European Long Term Bond Yields (ECB)") +
theme_bw()
#NOTES: Great convergence in 1990s, great divergence in 2010s.
#Find pre-ECB data to see extent of convergence.
#For greater simplicity of selection, impose filter for countries
b2 <- function(cy){
subdf <- subset(df, country == cy)
ggplot(subdf,
aes(x=date, y=(yield/100), colour=country, linetype=country, size=country)) +
geom_line() +
scale_y_continuous(labels = percent_format()) +
#scale_size_manual(values=c(rep.int(1, 19))) +
#scale_linetype_manual(values=c(rep.int(1, 19))) +
ylab("European Long Term Bond Yields (ECB)") +
theme_bw()
}
x <- as.list(as.character(unique(df$country)))
graph <- manipulate (b2(cy), cy = picker(x, label = "Country"))
#Lehman Bros collapse: 15 Sep 2008. (wiki)
#Greece: 20 Oct 2009 - defecit revelation. Dec 2009 ratings agencies downgrade (A1 to A2)
#9 Feb 2010 first austerity package. 3 March second package. April - more downgrades
#2 May 2010 bailout. 5 May general strike.
b1
col.names(data)
colnames(data)
x
View(df)
View(data)
b2
graph
require(ggplot2)
require(zoo)
require(reshape2)
require(RColorBrewer)
require(tidyr)
require(dplyr)
require(plyr)
require(scales) #for percentage point scales
require(chron)
require(manipulate) # for checkbox/picker.
setwd("~/Academic/SGPE/Dissertation/Data/csv/")
data <- read.csv("long_term_interest_rates_ECB.csv")
data$date <- as.yearmon(data$date, "%Y%b")
data$date <- as.Date(data$date, "%b %Y")
x <- colnames(data)
df <- data %>%
gather(country, yield, Austria..Euro:Slovakia..Euro)
levels(df$country) <- c("AT", "BE", "CY", "DE", "ES", "FI", "FR", "UK", "GR", "IE", "IT", "LT", "LU", "LV", "MT", "NL", "PT", "SI", "SK")
df$date <- as.chron(df$date)
df$date <- as.Date(df$date, format="%m/%d/%y")
#save manipulations
#write.csv(df, "ecb_lti_clean.csv", row.names = FALSE)
#Graphs
b1 <- ggplot(data=df,
aes(date, yield/100, colour=country, linetype=country, size=country)) +
geom_line() +
scale_y_continuous(labels = percent_format()) +
scale_size_manual(values=c(rep.int(1, 19))) +
scale_linetype_manual(values=c(rep.int(1, 19))) +
ylab("European Long Term Bond Yields (ECB)") +
theme_bw()
#NOTES: Great convergence in 1990s, great divergence in 2010s.
#Find pre-ECB data to see extent of convergence.
#For greater simplicity of selection, impose filter for countries
b2 <- function(cy){
subdf <- subset(df, country == cy)
ggplot(subdf,
aes(x=date, y=(yield/100), colour=country, linetype=country, size=country)) +
geom_line() +
scale_y_continuous(labels = percent_format()) +
#scale_size_manual(values=c(rep.int(1, 19))) +
#scale_linetype_manual(values=c(rep.int(1, 19))) +
ylab("European Long Term Bond Yields (ECB)") +
theme_bw()
}
x <- as.list(as.character(unique(df$country)))
graph <- manipulate (b2(cy), cy = picker(x, label = "Country"))
#Lehman Bros collapse: 15 Sep 2008. (wiki)
#Greece: 20 Oct 2009 - defecit revelation. Dec 2009 ratings agencies downgrade (A1 to A2)
#9 Feb 2010 first austerity package. 3 March second package. April - more downgrades
#2 May 2010 bailout. 5 May general strike.
graph
graph
graph <- manipulate (b2(cy), cy = picker(x, label = "Country"))
b3 <- ggplot(data=subset(df, country %in% c("PT", "IT", "IE", "GR", "ES", "DE")),
aes(date, yield/100, colour=country, linetype=country, size=country)) +
geom_line() +
scale_y_continuous(labels = percent_format()) +
scale_size_manual(values=c(rep.int(1, 19))) +
scale_linetype_manual(values=c(rep.int(1, 19))) +
ylab("European Long Term Bond Yields (ECB)") +
theme_bw()
b3
b3 <- ggplot(data=subset(df, country %in% c("PT", "IT", "IE", "GR", "ES", "DE", "UK")),
aes(date, yield/100, colour=country, linetype=country, size=country)) +
geom_line() +
scale_y_continuous(labels = percent_format()) +
scale_size_manual(values=c(rep.int(1, 19))) +
scale_linetype_manual(values=c(rep.int(1, 19))) +
ylab("European Long Term Bond Yields (ECB)") +
theme_bw()
b3
b3 <- ggplot(data=subset(df, country %in% c("PT", "IT", "IE", "GR", "ES", "DE")),
aes(date, yield/100, colour=country, linetype=country, size=country)) +
geom_line() +
scale_y_continuous(labels = percent_format()) +
scale_size_manual(values=c(rep.int(1, 19))) +
scale_linetype_manual(values=c(rep.int(1, 19))) +
ylab("European Long Term Bond Yields (ECB)") +
theme_bw()
b3 +   + geom_vline(xintercept=as.numeric(as.Date("2009-10-20")))
b3 + geom_vline(xintercept=as.numeric(as.Date("2009-10-20")))
#Adding Greek bailout date and Euro circulation date
b3 +
geom_vline(xintercept=as.numeric(as.Date("2009-10-20"))) b3 +
geom_vline(xintercept=as.numeric(as.Date("2002-01-01")))
b3 +
geom_vline(xintercept=as.numeric(as.Date("2009-10-20"))) b3 +
b3 +
geom_vline(xintercept=as.numeric(as.Date("2009-10-20"))) +
geom_vline(xintercept=as.numeric(as.Date("2002-01-01")))
